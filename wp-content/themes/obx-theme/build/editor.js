(()=>{"use strict";const e=window.ReactJSXRuntime,{__}=wp.i18n,{addFilter:t}=wp.hooks,{createHigherOrderComponent:n}=wp.compose,{Fragment:o}=wp.element,{InspectorControls:a,PanelColorSettings:l}=wp.blockEditor,{PanelBody:i,PanelRow:r,ToggleControl:s,TextControl:c}=wp.components,{registerBlockStyle:h}=wp.blocks;document.addEventListener("DOMContentLoaded",(function(){wp&&wp.blocks&&wp.blocks.registerBlockStyle&&(h("core/paragraph",{name:"highlight",label:"Highlight"}),h("core/button",{name:"outline",label:"Outline"}))})),t("blocks.registerBlockType","obx-theme/heading-attributes",(function(e,t){return"core/heading"!==t?e:{...e,attributes:{...e.attributes,showInToc:{type:"boolean",default:!0},titleInToc:{type:"string",default:""}}}})),t("editor.BlockEdit","obx-theme/with-toc-controls",n((t=>n=>{if("core/heading"!==n.name)return(0,e.jsx)(t,{...n});const{attributes:l,setAttributes:h}=n,{showInToc:d,titleInToc:g,anchor:p,content:b}=l,u=()=>{if(b){const e=b.toString().toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");(!p||w&&p!==e)&&h({anchor:e})}},[w,m]=wp.element.useState(!p||p&&b&&p===b.toString().toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"));return wp.element.useEffect((()=>{d&&w&&u()}),[b]),d&&b&&!p&&u(),(0,e.jsxs)(o,{children:[(0,e.jsx)(t,{...n}),(0,e.jsx)(a,{children:(0,e.jsxs)(i,{title:__("Table of Contents Settings","obx-theme"),initialOpen:!1,children:[(0,e.jsx)(r,{children:(0,e.jsx)(s,{label:__("Show in Table of Contents","obx-theme"),checked:d,onChange:e=>{h({showInToc:e}),e&&u()},help:__(d?"This heading will appear in the Table of Contents.":"This heading will not appear in the Table of Contents.","obx-theme")})}),d&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r,{children:(0,e.jsx)(c,{label:__("Alternative TOC Title","obx-theme"),value:g,onChange:e=>h({titleInToc:e}),help:__("Custom text to display in the Table of Contents. Leave empty to use the heading text.","obx-theme")})}),(0,e.jsx)(r,{children:(0,e.jsx)(s,{label:__("Auto-update anchor","obx-theme"),checked:w,onChange:e=>m(e),help:__(w?"Anchor will update automatically when heading changes.":"Anchor will remain fixed when heading changes.","obx-theme")})})]})]})})]})}),"withTocControls")),t("blocks.getSaveContent.extraProps","obx-theme/save-heading-attributes",((e,t,n)=>{if("core/heading"!==t.name)return e;const{showInToc:o,titleInToc:a}=n;return e["data-show-in-toc"]=!1===o?"false":"true",a&&(e["data-title-in-toc"]=a),n.anchor&&!e.id&&(e.id=n.anchor),e}))})();